{% extends '../base.html' %}
{% load widget_tweaks %}

{% block title %}
    {{ company.name }}
{% endblock %}

{% block body %}
    <div class="container">
        {% if offers %}
            <table class="table">
                <thead>
                <tr>
                    <th></th>
                    <th scope="col">SKU</th>
                    <th scope="col">Название</th>
                    <th scope="col">Бренд</th>
                    <th scope="col">Цена</th>
                </tr>
                </thead>
                <tbody>
                {% for offer in offers %}
                    <tr>
                        <td>
                            <input class="form-check-input" type="checkbox">
                        </td>
                        <td>{{ offer.sku }}</td>
                        <td>{{ offer.name }}</td>
                        <td>
                            {% if offer.brand %}
                                {{ offer.brand }}
                            {% endif %}
                        </td>
                        <td>{{ offer.price }}₸</td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
            <button class="btn btn-danger">Удалить</button>
            <div class="d-flex">
                <button id="js-xml-copy-clipboard" type="button" class="btn btn-secondary border rounded-0"
                        data-bs-toggle="tooltip" data-bs-placement="top"
                        data-bs-custom-class="custom-tooltip"
                        data-bs-title="This top tooltip is themed via CSS variables.">
                    Скопировать
                </button>
                <input id="js-xml-file-link" class="form-control border rounded-0" readonly
                       value="http://{{ request.get_host }}{% url 'offers__xml' company.uuid %}">

            </div>
            <script>
                const offersXMLURLInput = document.querySelector('#js-xml-file-link')
                {#const offersXMLClipboardCopyButton = document.querySelector('#js-xml-copy-clipboard')#}

                offersXMLURLInput.onclick = () => {
                    navigator.clipboard.writeText(offersXMLURLInput.value).then()
                }
            </script>
        {% else %}
            {% include '../components/forms/create_offer.html' with form_legend="Нет товаров" %}
        {% endif %}
    </div>
{% endblock %}